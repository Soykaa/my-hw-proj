# Design document

## Список разработчиков

- Жемчужина Елизавета
- Кириллова Евгения
- Сунко Елена
- Иценко Екатерина

## Общие сведения о системе
### Назначение

Система представляет из себя веб-сервис для проверки домашних заданий.

### Границы системы

- Наличие веб-интерфейса
- 1 студент, 1 преподаватель, 1 курс
- Нет авторизации
- Нет валидации пользовательского ввода (считаем, что нам, например, не будут засылать вирус)

### Контекст

- Наличие веб-интерфейса
- REST API для доступа к информации, хранимой в системе 

## Architectural drivers
### Технические ограничения
Должны быть предусмотрены библиотеки для работы с _RabbitMQ_, _PostgreSQL_ и _HTTP-запросами_.

### Бизнес-ограничения

- Срок разработки ограничен одной неделей
- В силу отсутствия бюджета, используются бесплатные фреймворки и библиотеки

### Качественные характеристики системы

- Система должна быть достаточно гибкой для дальнейшей расширяемости

### Ключевые функциональные требования

- Поскольку один студент может осуществлять несколько посылок, а чекер может работать долго предусмотрена балансировка нагрузки

## Architectural views
### Роли и случаи использования

#### Роли

- Студент
- Преподаватель

#### Случаи использования

- Студент может просматривать список домашних работ, отсортированный по близости дедлайна, причём
  должны показываться только работы, дата публикации которых уже наступила
- Студент может сдать решение в виде ссылки на GitHub — для этого ему надо кликнуть на элемент
  списка домашних работ, в результате чего он попадёт на экран с детальной информацией
  о работе (включая полное условие), полем для ввода ссылки на решение и кнопкой
  «Submit»
- Студент может просмотреть список результатов, отсортированный по дате сдачи
- Студент может просмотреть детальную информацию о попытке по клику на элемент списка результатов,
  включая текстовый вывод программы-проверялки
- Преподаватель может добавить новую домашнюю работу
- Преподаватель может просмотреть список результатов, отсортированный по дате сдачи
- Преподаватель может просмотреть детальную информацию о попытке по клику на элемент списка результатов,
  включая текстовый вывод программы-проверялки
- Преподаватель может добавить свою проверялку

#### Типичный пользователь

TODO фото

Это студентка ПМИ Елизавета Жемчужина. Она утомляется, когда делает домашнее задание, поэтому она хотела бы использовать эффективную систему автоматической проверки, чтобы после сдачи задания больше о нем не думать. Кроме того, Елизавета иногда хочет посмотреть на список уже сданных заданий, чтобы понять, какая она молодец.

TODO фото

Это преподаватель ПМИ Илона Маскова. Она очень устает от проверок домашних работ Елизаветы и хочет поменьше смотреть на ее код. Именно поэтому она хочет пользоваться системой автоматической сдачи работ. Иногда Илона хочет посмотреть, почему Елизавета сдала задачу всего со 101-ой попытки, поэтому ей нужна информация обо всех попытках сдачи.

P.S. Все совпадения с реальными людьми случайны.
### Композиция
<img src="images/web_service_components.png">

В отдельные компоненты вынесена логика обработки запросов, бизнес-логика, работа с очередью задач, а также логика работы раннеров

#### Описания компонент:

- **Controller** отвечает за роутинг и обработку входящих запросов, десериализацию переданных данных, координацию действий объектов доменной модели и 
формирование видов, которые надо отправить в ответ.
- **Model** представляет данные, с которыми работает приложение, и бизнес-логику по обработке этих данных
- **Queue** - очередь, в которую отправляются задачи на проверку
- **Runner** запускает все проверки

### Логическая структура

TODO

#### Диаграмма 

<img src="images/web_service_classes.png">

### Модель данных
#### ER-диаграмма

<img src="images/er.png">

В базе данных буду хранится:
1. домашнии задании (`table Homework`), каждое хранит название, дату публикации, описание и дедлайн
и ссылается на нужную проверядку
2. типы чекеров (`table CheckerType`), каждый хранит заданный учителем код проверялки
3. попытки (`table Attempt`), каждая хранит дату, информацию о студенте (имя и фамилия), информацию о результате 
(оценка и комментарий, могут быть равны `null`, если попытка еще не проверена) и ссылается на соответствующее домашнее задание 


## Обоснование принятых решений:

Для работы был выбран [Spring Framework](https://spring.io/projects/spring-framework).

В качестве альтернативы рассматривали так же [Ktor](https://github.com/ktorio/ktor), однако, во-первых, 
у нас есть некоторый опыт работы со `Spring Framework`, а, во-вторых, у `Ktor` хуже документация


